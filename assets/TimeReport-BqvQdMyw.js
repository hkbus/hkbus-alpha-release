import{q as G,s as F,t as $,x as l,w as O,a3 as Ee,a4 as Se,_ as V,a5 as fe,a6 as Me,a7 as ze,y as D,z as H,a8 as se,P as Le,a9 as Ne,aa as ke,A as De,ab as re,ac as E,ad as te,ae as Ie,af as Be,ag as _e,b as S,e as me}from"./App-BP_5kTt-.js";import{r as x,j as n,b as ge,u as be,e as he,A as xe,o as We,m as Ue}from"./index-B5N-jUy8.js";import{C as qe}from"./CircularProgress-Bi997K7R.js";function Ge(e){return G("MuiCollapse",e)}F("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Fe=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Oe=e=>{const{orientation:r,classes:t}=e,o={root:["root",`${r}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${r}`],wrapperInner:["wrapperInner",`${r}`]};return H(o,Ge,t)},Ve=$("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[t.orientation],t.state==="entered"&&r.entered,t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&r.hidden]}})(({theme:e,ownerState:r})=>l({height:0,overflow:"hidden",transition:e.transitions.create("height")},r.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},r.state==="entered"&&l({height:"auto",overflow:"visible"},r.orientation==="horizontal"&&{width:"auto"}),r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&{visibility:"hidden"})),He=$("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,r)=>r.wrapper})(({ownerState:e})=>l({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Ke=$("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,r)=>r.wrapperInner})(({ownerState:e})=>l({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),ve=x.forwardRef(function(r,t){const o=O({props:r,name:"MuiCollapse"}),{addEndListener:c,children:b,className:p,collapsedSize:d="0px",component:s,easing:y,in:u,onEnter:f,onEntered:m,onEntering:v,onExit:h,onExited:i,onExiting:g,orientation:C="vertical",style:w,timeout:P=Ee.standard,TransitionComponent:B=Se}=o,Q=V(o,Fe),z=l({},o,{orientation:C,collapsedSize:d}),A=Oe(z),_=fe(),Y=Me(),T=x.useRef(null),W=x.useRef(),L=typeof d=="number"?`${d}px`:d,M=C==="horizontal",U=M?"width":"height",K=x.useRef(null),ye=ze(t,K),N=a=>R=>{if(a){const j=K.current;R===void 0?a(j):a(j,R)}},Z=()=>T.current?T.current[M?"clientWidth":"clientHeight"]:0,Re=N((a,R)=>{T.current&&M&&(T.current.style.position="absolute"),a.style[U]=L,f&&f(a,R)}),$e=N((a,R)=>{const j=Z();T.current&&M&&(T.current.style.position="");const{duration:q,easing:J}=se({style:w,timeout:P,easing:y},{mode:"enter"});if(P==="auto"){const ne=_.transitions.getAutoHeightDuration(j);a.style.transitionDuration=`${ne}ms`,W.current=ne}else a.style.transitionDuration=typeof q=="string"?q:`${q}ms`;a.style[U]=`${j}px`,a.style.transitionTimingFunction=J,v&&v(a,R)}),we=N((a,R)=>{a.style[U]="auto",m&&m(a,R)}),Pe=N(a=>{a.style[U]=`${Z()}px`,h&&h(a)}),Ae=N(i),Te=N(a=>{const R=Z(),{duration:j,easing:q}=se({style:w,timeout:P,easing:y},{mode:"exit"});if(P==="auto"){const J=_.transitions.getAutoHeightDuration(R);a.style.transitionDuration=`${J}ms`,W.current=J}else a.style.transitionDuration=typeof j=="string"?j:`${j}ms`;a.style[U]=L,a.style.transitionTimingFunction=q,g&&g(a)}),je=a=>{P==="auto"&&Y.start(W.current||0,a),c&&c(K.current,a)};return n.jsx(B,l({in:u,onEnter:Re,onEntered:we,onEntering:$e,onExit:Pe,onExited:Ae,onExiting:Te,addEndListener:je,nodeRef:K,timeout:P==="auto"?null:P},Q,{children:(a,R)=>n.jsx(Ve,l({as:s,className:D(A.root,p,{entered:A.entered,exited:!u&&L==="0px"&&A.hidden}[a]),style:l({[M?"minWidth":"minHeight"]:L},w),ref:ye},R,{ownerState:l({},z,{state:a}),children:n.jsx(He,{ownerState:l({},z,{state:a}),className:A.wrapper,ref:T,children:n.jsx(Ke,{ownerState:l({},z,{state:a}),className:A.wrapperInner,children:b})})}))}))});ve.muiSupportAuto=!0;const Je=ve,Ce=x.createContext({});function Xe(e){return G("MuiAccordion",e)}const Qe=F("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),X=Qe,Ye=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Ze=e=>{const{classes:r,square:t,expanded:o,disabled:c,disableGutters:b}=e;return H({root:["root",!t&&"rounded",o&&"expanded",c&&"disabled",!b&&"gutters"],region:["region"]},Xe,r)},er=$(Le,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[{[`& .${X.region}`]:r.region},r.root,!t.square&&r.rounded,!t.disableGutters&&r.gutters]}})(({theme:e})=>{const r={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${X.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${X.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e,ownerState:r})=>l({},!r.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!r.disableGutters&&{[`&.${X.expanded}`]:{margin:"16px 0"}})),rr=x.forwardRef(function(r,t){const o=O({props:r,name:"MuiAccordion"}),{children:c,className:b,defaultExpanded:p=!1,disabled:d=!1,disableGutters:s=!1,expanded:y,onChange:u,square:f=!1,slots:m={},slotProps:v={},TransitionComponent:h,TransitionProps:i}=o,g=V(o,Ye),[C,w]=Ne({controlled:y,default:p,name:"Accordion",state:"expanded"}),P=x.useCallback(M=>{w(!C),u&&u(M,!C)},[C,u,w]),[B,...Q]=x.Children.toArray(c),z=x.useMemo(()=>({expanded:C,disabled:d,disableGutters:s,toggle:P}),[C,d,s,P]),A=l({},o,{square:f,disabled:d,disableGutters:s,expanded:C}),_=Ze(A),Y=l({transition:h},m),T=l({transition:i},v),[W,L]=ke("transition",{elementType:Je,externalForwardedProps:{slots:Y,slotProps:T},ownerState:A});return n.jsxs(er,l({className:D(_.root,b),ref:t,ownerState:A,square:f},g,{children:[n.jsx(Ce.Provider,{value:z,children:B}),n.jsx(W,l({in:C,timeout:"auto"},L,{children:n.jsx("div",{"aria-labelledby":B.props.id,id:B.props["aria-controls"],role:"region",className:_.region,children:Q})}))]}))}),Lr=rr;function tr(e){return G("MuiAccordionDetails",e)}F("MuiAccordionDetails",["root"]);const or=["className"],nr=e=>{const{classes:r}=e;return H({root:["root"]},tr,r)},sr=$("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),ar=x.forwardRef(function(r,t){const o=O({props:r,name:"MuiAccordionDetails"}),{className:c}=o,b=V(o,or),p=o,d=nr(p);return n.jsx(sr,l({className:D(d.root,c),ref:t,ownerState:p},b))}),Nr=ar;function ir(e){return G("MuiAccordionSummary",e)}const lr=F("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),k=lr,cr=["children","className","expandIcon","focusVisibleClassName","onClick"],dr=e=>{const{classes:r,expanded:t,disabled:o,disableGutters:c}=e;return H({root:["root",t&&"expanded",o&&"disabled",!c&&"gutters"],focusVisible:["focusVisible"],content:["content",t&&"expanded",!c&&"contentGutters"],expandIconWrapper:["expandIconWrapper",t&&"expanded"]},ir,r)},ur=$(De,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e,ownerState:r})=>{const t={duration:e.transitions.duration.shortest};return l({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${k.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${k.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${k.disabled})`]:{cursor:"pointer"}},!r.disableGutters&&{[`&.${k.expanded}`]:{minHeight:64}})}),pr=$("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,r)=>r.content})(({theme:e,ownerState:r})=>l({display:"flex",flexGrow:1,margin:"12px 0"},!r.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${k.expanded}`]:{margin:"20px 0"}})),fr=$("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,r)=>r.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${k.expanded}`]:{transform:"rotate(180deg)"}})),mr=x.forwardRef(function(r,t){const o=O({props:r,name:"MuiAccordionSummary"}),{children:c,className:b,expandIcon:p,focusVisibleClassName:d,onClick:s}=o,y=V(o,cr),{disabled:u=!1,disableGutters:f,expanded:m,toggle:v}=x.useContext(Ce),h=C=>{v&&v(C),s&&s(C)},i=l({},o,{expanded:m,disabled:u,disableGutters:f}),g=dr(i);return n.jsxs(ur,l({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":m,className:D(g.root,b),focusVisibleClassName:D(g.focusVisible,d),onClick:h,ref:t,ownerState:i},y,{children:[n.jsx(pr,{className:g.content,ownerState:i,children:c}),p&&n.jsx(fr,{className:g.expandIconWrapper,ownerState:i,children:p})]}))}),kr=mr;function gr(e){return G("MuiLinearProgress",e)}F("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const br=["className","color","value","valueBuffer","variant"];let I=e=>e,ae,ie,le,ce,de,ue;const ee=4,hr=re(ae||(ae=I`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),xr=re(ie||(ie=I`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),vr=re(le||(le=I`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Cr=e=>{const{classes:r,variant:t,color:o}=e,c={root:["root",`color${E(o)}`,t],dashed:["dashed",`dashedColor${E(o)}`],bar1:["bar",`barColor${E(o)}`,(t==="indeterminate"||t==="query")&&"bar1Indeterminate",t==="determinate"&&"bar1Determinate",t==="buffer"&&"bar1Buffer"],bar2:["bar",t!=="buffer"&&`barColor${E(o)}`,t==="buffer"&&`color${E(o)}`,(t==="indeterminate"||t==="query")&&"bar2Indeterminate",t==="buffer"&&"bar2Buffer"]};return H(c,gr,r)},oe=(e,r)=>r==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${r}Bg`]:e.palette.mode==="light"?Ie(e.palette[r].main,.62):Be(e.palette[r].main,.5),yr=$("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[`color${E(t.color)}`],r[t.variant]]}})(({ownerState:e,theme:r})=>l({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:oe(r,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),Rr=$("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.dashed,r[`dashedColor${E(t.color)}`]]}})(({ownerState:e,theme:r})=>{const t=oe(r,e.color);return l({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${t} 0%, ${t} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},te(ce||(ce=I`
    animation: ${0} 3s infinite linear;
  `),vr)),$r=$("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.bar,r[`barColor${E(t.color)}`],(t.variant==="indeterminate"||t.variant==="query")&&r.bar1Indeterminate,t.variant==="determinate"&&r.bar1Determinate,t.variant==="buffer"&&r.bar1Buffer]}})(({ownerState:e,theme:r})=>l({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(r.vars||r).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${ee}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${ee}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&te(de||(de=I`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),hr)),wr=$("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.bar,r[`barColor${E(t.color)}`],(t.variant==="indeterminate"||t.variant==="query")&&r.bar2Indeterminate,t.variant==="buffer"&&r.bar2Buffer]}})(({ownerState:e,theme:r})=>l({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(r.vars||r).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:oe(r,e.color),transition:`transform .${ee}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&te(ue||(ue=I`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),xr)),Pr=x.forwardRef(function(r,t){const o=O({props:r,name:"MuiLinearProgress"}),{className:c,color:b="primary",value:p,valueBuffer:d,variant:s="indeterminate"}=o,y=V(o,br),u=l({},o,{color:b,variant:s}),f=Cr(u),m=fe(),v={},h={bar1:{},bar2:{}};if((s==="determinate"||s==="buffer")&&p!==void 0){v["aria-valuenow"]=Math.round(p),v["aria-valuemin"]=0,v["aria-valuemax"]=100;let i=p-100;m.direction==="rtl"&&(i=-i),h.bar1.transform=`translateX(${i}%)`}if(s==="buffer"&&d!==void 0){let i=(d||0)-100;m.direction==="rtl"&&(i=-i),h.bar2.transform=`translateX(${i}%)`}return n.jsxs(yr,l({className:D(f.root,c),ownerState:u,role:"progressbar"},v,{ref:t},y,{children:[s==="buffer"?n.jsx(Rr,{className:f.dashed,ownerState:u}):null,n.jsx($r,{className:f.bar1,ownerState:u,style:h.bar1}),s==="determinate"?null:n.jsx(wr,{className:f.bar2,ownerState:u,style:h.bar2})]}))}),Ar=Pr,Tr=ge.forwardRef(({sx:e,color:r,...t},o)=>n.jsx(Ar,{color:r??"inherit",sx:{m:1,height:5,borderRadius:5,...e},ref:o,...t})),Dr=ge.forwardRef(({sx:e,color:r,...t},o)=>n.jsx(qe,{color:r??"inherit",sx:{m:1,...e},ref:o,...t})),Ir=({routeId:e,seq:r,containerSx:t,showStopName:o=!1})=>{const{t:c}=be(),b=he(),{db:{routeList:p,stopList:d}}=x.useContext(xe),s=_e(`${e}/${r}`),{route:y,co:u,stops:f}=p[e],m=Object.values(f)[0][r],v=x.useMemo(()=>Object.values(p[e].stops).map(i=>d[i[i.length-1]].name).concat(p[e].dest),[p,e,d]),h=x.useMemo(()=>{let i=!1;return u[0]==="mtr"?i=f.mtr.indexOf(m)+1>=f.mtr.length:u.includes("lightRail")&&(i=f.lightRail.indexOf(m)+1>=f.lightRail.length),s===null?null:i&&s.length===0?c("終點站"):s.length>0&&s.every(g=>!g.eta)&&s[0].remark[b]?s[0].remark[b]:s.length===0||s.every(g=>!g.eta)?c("未有班次資料"):null},[s,u,f,m,c,b]);return s==null?n.jsx(S,{sx:t,children:n.jsx(Tr,{})}):n.jsxs(S,{sx:t,children:[o&&n.jsx(me,{variant:"caption",children:d[m].name[b]}),h,s.length>0&&s.every(i=>i.eta)&&s.map((i,g)=>n.jsx(jr,{eta:i,routeDests:v,showCompany:u.length>1,route:y},`route-${g}`))]})},jr=({eta:{eta:e,remark:r,co:t,dest:o},routeDests:c,showCompany:b,route:p})=>{const{t:d}=be(),s=he(),{etaFormat:y,platformMode:u}=x.useContext(xe),f=x.useMemo(()=>{if(t==="mtr")return!0;for(const w of c)if(w.en.toLowerCase()===o.en.toLowerCase()||w.zh===o.zh)return!1;return!0},[c,o,t]),m=Math.round((new Date(e).getTime()-new Date().getTime())/60/1e3),v=n.jsx(S,{component:"span",sx:y!=="exact"?{fontSize:"0.9em"}:{},children:e.slice(11,16)}),h=t==="mtr"||t==="lightRail";let i,g;h&&m<=1?(i=m===1?`${d("即將抵達")} `:`${d("正在離開")} `,g=!0):(i=m<1?" - ":`${m} `,g=!1);const C=n.jsxs(S,{component:"span",children:[n.jsx(S,{component:"span",sx:{...Er,color:w=>w.palette.warning.main},fontSize:g?"0.9em":void 0,children:i}),!g&&n.jsx(S,{component:"span",sx:{fontSize:"0.8em"},children:d("分鐘")})]});return n.jsxs(me,{variant:"subtitle1",children:[y==="diff"&&C,y==="exact"&&v,y==="mixed"&&n.jsxs(n.Fragment,{children:[v," ",C]}),!h&&n.jsx(n.Fragment,{children:" - "}),n.jsxs(S,{component:"span",sx:{fontSize:"0.8em",textOverflow:"ellipsis"},children:[b&&n.jsxs(n.Fragment,{children:[" ",d(t)]})," ",h?n.jsx(S,{component:"span",color:We([t],p,!0),children:pe(r[s],s,u)}):pe(r[s],s,u),h&&" ",!h&&n.jsx(n.Fragment,{children:" "}),f&&o[s]]})]})},pe=(e,r,t)=>{if(e===null)return"";const o=[...e.matchAll(r==="zh"?/(\d+)號月台/g:/Platform (\d+)/g)][0]||[];return o.length===2&&o[1].length&&(e=Ue(Number(o[1]),t)),r==="zh"?e.replace(/▭▭/g,"雙卡").replace(/▭/g,"單卡"):e.replace(/▭▭/g,"Duel").replace(/▭/g,"Single")},Er={fontWeight:"700",color:"#088bce"};export{Lr as A,Dr as C,Tr as L,Ir as T,kr as a,Nr as b};
